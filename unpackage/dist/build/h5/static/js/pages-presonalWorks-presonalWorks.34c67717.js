(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-presonalWorks-presonalWorks"],{"07fd":function(t,e,i){"use strict";i.r(e);var n=i("c437"),o=i.n(n);for(var s in n)"default"!==s&&function(t){i.d(e,t,(function(){return n[t]}))}(s);e["default"]=o.a},"0ed4":function(t,e,i){"use strict";var n;i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return n}));var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("v-uni-view",{staticClass:"p-3"},[i("v-uni-view",{staticClass:"py-3 rounded-circle flex font-md text-white justify-center align-center bg-main",attrs:{"hover-class":"bg-main-hover"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.ToFatherMy.apply(void 0,arguments)}}},[t._t("default")],2)],1)],1)},s=[]},1537:function(t,e,i){"use strict";var n;i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return n}));var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"flex border-bottom border-light-secondary",staticStyle:{height:"100rpx"}},[i("v-uni-view",{staticClass:"flex align-center justify-center font-md",staticStyle:{width:"170rpx",height:"100rpx"}},[t._v(t._s(t.title))]),i("v-uni-view",{staticClass:"flex-1 flex align-center"},[t._t("default")],2),i("v-uni-view",{staticClass:"flex justify-center align-center",staticStyle:{height:"100rpx",width:"80rpx"}},[i("v-uni-text",{directives:[{name:"show",rawName:"v-show",value:t.rightIconShow,expression:"rightIconShow"}],staticClass:"iconfont iconjinru text-muted"})],1)],1)},s=[]},3541:function(t,e,i){"use strict";i.r(e);var n=i("c831"),o=i.n(n);for(var s in n)"default"!==s&&function(t){i.d(e,t,(function(){return n[t]}))}(s);e["default"]=o.a},"4f24":function(t,e,i){"use strict";i.r(e);var n=i("1537"),o=i("3541");for(var s in o)"default"!==s&&function(t){i.d(e,t,(function(){return o[t]}))}(s);var r,a=i("f0c5"),c=Object(a["a"])(o["default"],n["b"],n["c"],!1,null,"c04e5544",null,!1,n["a"],r);e["default"]=c.exports},"8c7f":function(t,e,i){"use strict";var n;i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return n}));var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("v-uni-view",{staticClass:"bg-light position-relative",staticStyle:{height:"350rpx"},attrs:{"hover-class":"bg-hover-light"}},[t._l(t.imgList,(function(t,e){return i("v-uni-image",{key:e,staticStyle:{width:"100%",height:"350rpx","background-color":"rgba(255,255,255,0.2)"},attrs:{src:t,mode:"aspectFill"}})})),i("v-uni-view",{staticClass:"position-absolute flex flex-column align-center justify-center left-0 bottom-0 right-0 top-0"},[i("v-uni-text",{staticClass:"iconfont iconjia",staticStyle:{"font-size":"50rpx"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.setPhoto.apply(void 0,arguments)}}}),i("v-uni-text",{staticClass:"font text-muted"},[t._v(t._s(1==t.imgList.length?"点击切换封面图":"点击添加封面图"))])],1)],2),i("personalworksTypeDeatil",{attrs:{title:"标题"}},[i("v-uni-input",{staticClass:"w-100 pr-5",attrs:{type:"text",placeholder:"请填写视频标题","placeholder-class":"text-light-muted"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),i("personalworksTypeDeatil",{attrs:{title:"分类",rightIconShow:!0}},[i("v-uni-picker",{attrs:{mode:"selector",range:t.sortRange,value:t.index,"range-key":"title"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.sortSelector(e)}}},[i("v-uni-input",{staticClass:"w-100 pr-5",attrs:{type:"text",placeholder:"请选择分类","placeholder-class":"text-light-muted"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1)],1),i("personalworksTypeDeatil",{attrs:{title:"描述"}},[i("v-uni-input",{staticClass:"w-100 pr-5",attrs:{type:"text",placeholder:"请填写视频描述","placeholder-class":"text-light-muted"},model:{value:t.form.desc,callback:function(e){t.$set(t.form,"desc",e)},expression:"form.desc"}})],1),i("v-uni-view",{staticClass:"mt-4"}),i("myToSeend",{on:{onSetToClick:function(e){arguments[0]=e=t.$handleEvent(e),t.setVideo.apply(void 0,arguments)}}},[t._v(t._s(t.buttonText))])],1)},s=[]},"905d":function(t,e,i){"use strict";i.r(e);var n=i("8c7f"),o=i("07fd");for(var s in o)"default"!==s&&function(t){i.d(e,t,(function(){return o[t]}))}(s);var r,a=i("f0c5"),c=Object(a["a"])(o["default"],n["b"],n["c"],!1,null,"02650b00",null,!1,n["a"],r);e["default"]=c.exports},bdf9:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={methods:{ToFatherMy:function(){this.$emit("onSetToClick")}}};e.default=n},c437:function(t,e,i){"use strict";(function(t){var n=i("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n(i("4f24")),s=n(i("f4aa")),r={components:{personalworksTypeDeatil:o.default,myToSeend:s.default},data:function(){return{buttonText:"立即发布",imgList:[],form:{title:"",category_id:"",desc:""},sortRange:[],index:0,result:{},title:""}},onLoad:function(e){var i=this;e.date&&(this.result=JSON.parse(decodeURIComponent(e.date)),t.log(this.result),this.imgList.push(this.result.cover),this.form.title=this.result.title,this.form.category_id=this.result.category_id,this.form.desc=this.result.desc,this.buttonText="立即修改",uni.setNavigationBarTitle({title:"修改作品"})),this.$selfApi.get("/sorticon").then((function(t){i.sortRange=t}))},methods:{setPhoto:function(){var e=this;uni.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album"],success:function(i){e.$selfApi.upload("/upload",{filePath:i.tempFilePaths[0]}).then((function(t){0==e.imgList.length?(e.imgList.push(t.url),uni.showToast({title:"上传成功",icon:"none"})):(e.imgList=[],e.imgList.push(t.url),uni.showToast({title:"切换成功",icon:"none"}))})).catch((function(e){t.log(e)}))}})},sortSelector:function(t){this.index=t.detail.value,this.form.category_id=this.sortRange[this.index].id,this.title=this.sortRange[this.index].title},setVideo:function(){this.result.id?this.updateVideo():this.$selfApi.post("/video",{title:this.form.title,cover:this.imgList[0],category_id:this.form.category_id,desc:this.form.desc},{token:!0}).then((function(t){uni.showToast({title:t,icon:"none"}),t.id&&(uni.showToast({title:"发布成功",icon:"none"}),setTimeout((function(){uni.navigateTo({url:"/pages/list/list?id=".concat(t.category_id)})}),1500))})).catch((function(e){t.log(e)}))},updateVideo:function(){var t=this,e="/video/update/".concat(this.result.id);return this.$selfApi.post(e,{title:this.form.title,cover:this.imgList[0],category_id:this.form.category_id,desc:this.form.desc},{token:!0}).then((function(e){uni.showToast({title:"修改成功"}),uni.navigateTo({url:"../personalVideo/personalVideo"}),t.form.title=e.title,t.imgList[0]=e.cover,t.form.category_id=e.category_id,t.form.desc=e.desc}))}}};e.default=r}).call(this,i("5a52")["default"])},c831:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={props:{title:{type:String},rightIconShow:{type:Boolean,default:!1}}};e.default=n},dd00:function(t,e,i){"use strict";i.r(e);var n=i("bdf9"),o=i.n(n);for(var s in n)"default"!==s&&function(t){i.d(e,t,(function(){return n[t]}))}(s);e["default"]=o.a},f4aa:function(t,e,i){"use strict";i.r(e);var n=i("0ed4"),o=i("dd00");for(var s in o)"default"!==s&&function(t){i.d(e,t,(function(){return o[t]}))}(s);var r,a=i("f0c5"),c=Object(a["a"])(o["default"],n["b"],n["c"],!1,null,"2b2af2ec",null,!1,n["a"],r);e["default"]=c.exports}}]);